<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ITZNEL VENDING</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { 
            background: #0f0c29;
            min-height: 100vh;
            font-family: sans-serif;
            display: flex; justify-content: center; padding: 10px;
            overflow-x: hidden;
        }
        @keyframes neon-glow {
            0%, 100% { text-shadow: 0 0 10px #ff7a00; color: #fff; }
            50% { text-shadow: 0 0 20px #ff7a00, 0 0 30px #ff7a00; color: #ff7a00; }
        }
        .vending-machine-body {
            background: #1a1a2e; border: 8px solid #24243e; border-radius: 30px;
            width: 100%; max-width: 1000px; padding: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .glass-window {
            background: rgba(0, 0, 0, 0.5); border: 2px solid #333; border-radius: 20px;
            padding: 15px; margin-bottom: 20px;
        }
        .item-card {
            background: rgba(255,255,255,0.05); border-radius: 15px; padding: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .item-img-box {
            width: 100%; aspect-ratio: 1/1; background: #000;
            border-radius: 10px; overflow: hidden; position: relative;
        }
        .item-img-box img { width: 100%; height: 100%; object-fit: cover; }
        
        /* ‰øÆÊ≠£Êî∂ÊìöËàáËû¢Âπï */
        #vending-screen {
            background: #050505; color: #ff7a00; font-family: monospace;
            padding: 10px; border-radius: 10px; text-align: center; font-size: 12px;
        }
        #receipt-stream {
            display: flex; flex-direction: column-reverse; align-items: center;
            max-height: 100px; overflow: hidden; margin-top: 5px;
        }
        .receipt-segment {
            background: #fff; color: #000; font-family: monospace; font-size: 10px;
            padding: 5px 10px; border-bottom: 1px dashed #ccc; width: 120px;
        }

        /* ‰øÆÊ≠£ÊâãÊ©üÊìç‰Ωú */
        .lucky-coin { 
            width: 30px; height: 30px; background: gold; border-radius: 50%;
            position: absolute; cursor: pointer; z-index: 50;
            display: flex; align-items: center; justify-content: center; color: #856404; font-weight: bold;
        }
        .voucher {
            background: linear-gradient(45deg, #ff7a00, #ff00cc); color: white;
            padding: 10px; border-radius: 5px; font-weight: bold; font-size: 12px;
            cursor: pointer; z-index: 60; margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="vending-machine-body">
        <header class="text-center mb-6">
            <h1 style="animation: neon-glow 2s infinite" class="text-2xl font-bold uppercase tracking-tighter">ITZNEL VENDING</h1>
            <p class="text-orange-500 text-[10px] tracking-widest uppercase">Special Edition Archive</p>
        </header>

        <div class="glass-window">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3" id="product-grid">
                </div>
        </div>

        <div class="bg-black/30 p-4 rounded-2xl border border-white/5 relative">
            <div id="vending-screen">READY TO SERVE</div>
            <div id="receipt-stream"></div>
            <div class="flex justify-between items-center mt-4 px-2">
                <div class="w-2 h-8 bg-zinc-800 rounded-full"></div>
                <div class="flex gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-600"></div>
                    <div class="w-3 h-3 rounded-full bg-green-600"></div>
                </div>
            </div>
        </div>

        <div id="delivery-area" class="mt-4 bg-black h-20 rounded-xl border-t-4 border-zinc-900 flex flex-col items-center justify-center relative overflow-hidden">
            <div class="text-[8px] text-zinc-700 font-mono">DELIVERY SLOT</div>
            <div id="coin-spawn"></div>
        </div>
    </div>

    <button onclick="toggleCart()" class="fixed bottom-6 right-6 bg-orange-500 text-black p-4 rounded-full shadow-2xl z-[100]">
        <i class="fas fa-shopping-cart text-xl"></i>
        <span id="cart-count" class="absolute -top-1 -left-1 bg-red-600 text-white text-[10px] px-2 py-0.5 rounded-full">0</span>
    </button>

    <div id="cart-modal" class="fixed inset-0 bg-black/95 z-[200] hidden p-6 flex flex-col">
        <div class="flex justify-between items-center mb-6 text-orange-500">
            <h2 class="text-xl font-bold">YOUR ORDER</h2>
            <button onclick="toggleCart()" class="text-3xl">&times;</button>
        </div>
        <div id="cart-list" class="flex-grow overflow-y-auto space-y-4 text-white"></div>
        <div class="mt-6 pt-6 border-t border-white/10">
            <div class="flex justify-between text-orange-500 font-bold text-xl mb-4">
                <span>TOTAL</span><span id="cart-total">$0</span>
            </div>
            <form action="https://formspree.io/f/mojnevzw" method="POST" class="space-y-3">
                <input type="hidden" name="Order" id="hidden-items">
                <input type="text" name="Name" placeholder="ÂßìÂêç" required class="w-full bg-white/5 border border-white/10 p-3 rounded-lg text-white outline-none">
                <input type="tel" name="Phone" placeholder="ÈõªË©±" required class="w-full bg-white/5 border border-white/10 p-3 rounded-lg text-white outline-none">
                <textarea name="Address" placeholder="Âú∞ÂùÄ" required class="w-full bg-white/5 border border-white/10 p-3 rounded-lg text-white h-24 outline-none"></textarea>
                <button type="submit" class="w-full bg-orange-500 text-black font-bold py-4 rounded-xl uppercase">Checkout</button>
            </form>
        </div>
    </div>

    <script>
        const products = [
            { id: 1, name: "SPECIAL EDITION #1", price: 150, image: "s1.jpg" },
            { id: 2, name: "Âæ©ÂàªÁ∂úÂêà‰∏âÈÉ®Êõ≤", price: 150, image: "s2.jpg" },
            { id: 3, name: "‰∏çÈÄü‰πãÂÆ¢", price: 150, image: "s3.jpg" },
            { id: 4, name: "HuhÂ±±Áî≤?", price: 150, image: "s4.jpg" }
        ];

        let cart = [];
        let coins = 0;

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            products.forEach((p, i) => {
                grid.innerHTML += `
                    <div class="item-card flex flex-col items-center">
                        <div class="item-img-box">
                            <img src="${p.image}" onerror="this.src='https://via.placeholder.com/200?text=ITZNEL'">
                        </div>
                        <div class="text-[10px] font-bold text-white mt-2 text-center h-6 overflow-hidden">${p.name}</div>
                        <div class="text-orange-500 text-[10px] font-mono mb-2">$${p.price}</div>
                        <button onclick="addToCart(${i})" class="w-full bg-orange-500/20 border border-orange-500 text-orange-500 text-[9px] py-1 rounded-md font-bold uppercase">Select</button>
                    </div>
                `;
            });
            // Ë£ú‰∏äÈéñÂÆöÊ†º
            for(let j=0; j<4; j++) {
                grid.innerHTML += `<div class="item-card opacity-20 flex items-center justify-center aspect-square text-[8px] font-mono">LOCKED</div>`;
            }
        }

        function addToCart(i) {
            const p = products[i];
            const exist = cart.find(x => x.id === p.id);
            if(exist) exist.qty += 1; else cart.push({...p, qty: 1});
            updateUI();
            printReceipt(p.name);
            if(Math.random() < 0.3) spawnCoin();
        }

        function updateUI() {
            document.getElementById('cart-count').innerText = cart.reduce((s, x) => s + x.qty, 0);
            const list = document.getElementById('cart-list');
            let total = 0;
            list.innerHTML = cart.map((x, idx) => {
                total += x.price * x.qty;
                return `<div class="flex justify-between bg-white/5 p-3 rounded-lg text-sm">
                    <span>${x.name} x ${x.qty}</span>
                    <button onclick="remove(${idx})" class="text-red-500"><i class="fas fa-trash"></i></button>
                </div>`;
            }).join('');
            document.getElementById('cart-total').innerText = `$${total}`;
            document.getElementById('hidden-items').value = cart.map(x => `${x.name}(${x.qty})`).join(', ');
        }

        function printReceipt(name) {
            const stream = document.getElementById('receipt-stream');
            const seg = document.createElement('div');
            seg.className = 'receipt-segment';
            seg.innerText = `RESERVED: ${name.slice(0,10)}`;
            stream.appendChild(seg);
            if(stream.children.length > 3) stream.removeChild(stream.firstChild);
            document.getElementById('vending-screen').innerText = "SELECTED: " + name;
            setTimeout(() => { document.getElementById('vending-screen').innerText = "READY TO SERVE"; }, 2000);
        }

        function spawnCoin() {
            const area = document.getElementById('coin-spawn');
            const c = document.createElement('div');
            c.className = 'lucky-coin';
            c.innerText = '$';
            c.style.left = Math.random() * 80 + '%';
            c.onclick = () => {
                coins++;
                document.getElementById('vending-screen').innerText = `COINS: ${coins}/20`;
                c.remove();
                if(coins >= 20) {
                    const v = document.createElement('div');
                    v.className = 'voucher';
                    v.innerText = 'üéüÔ∏è FREE VOUCHER';
                    v.onclick = () => {
                        cart.push({id: 999, name: "FREE VOUCHER", price: 0, qty: 1});
                        updateUI();
                        v.remove();
                        coins = 0;
                    };
                    document.getElementById('delivery-area').appendChild(v);
                }
            };
            area.appendChild(c);
            setTimeout(() => { if(c) c.remove(); }, 5000);
        }

        function remove(i) { cart.splice(i, 1); updateUI(); }
        function toggleCart() { document.getElementById('cart-modal').classList.toggle('hidden'); }

        renderProducts();
    </script>
</body>
</html>
